<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIR Support - Recuperare AnonimÄƒ</title>
    <!-- Scriptul Jitsi pentru integrare -->
    <script src='https://meet.jit.si/external_api.js'></script>
    
    <style>
        :root {
            --primary: #006d77;
            --accent: #e29578;
            --bg-light: #edf6f9;
            --text-dark: #2d3436;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        /* --- Header --- */
        header {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
        }

        /* --- Zona PrincipalÄƒ --- */
        .main-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            text-align: center;
        }

        .welcome-text {
            margin-bottom: 30px;
        }

        /* --- Containerul pentru ConferinÈ›Äƒ --- */
        #jitsi-container {
            height: 600px;
            width: 100%;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            display: none; /* Ascuns pÃ¢nÄƒ intrÄƒ cineva */
            margin-bottom: 20px;
        }

        /* --- Butonul de Start --- */
        .btn-start {
            background-color: var(--primary);
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-start:hover {
            background-color: #004d55;
        }

        /* --- Zona ADMIN (AscunsÄƒ) --- */
        #admin-panel {
            display: none; /* Ascuns implicit */
            background: #fff;
            border: 2px solid var(--accent);
            padding: 20px;
            margin-top: 50px;
            border-radius: 8px;
            text-align: left;
        }

        .admin-input {
            padding: 10px;
            width: 70%;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .btn-admin {
            background-color: var(--accent);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        footer {
            margin-top: 50px;
            padding: 20px;
            text-align: center;
            font-size: 0.8rem;
            color: #888;
            cursor: pointer; /* Pentru a sugera click pe copyright */
        }
    </style>
</head>
<body>

    <header>
        <a href="#" class="logo">AIR SUPPORT</a>
        <div id="meeting-status" style="color: green; font-weight: bold;">â— Online</div>
    </header>

    <div class="main-container">
        
        <div class="welcome-text" id="welcome-message">
            <h1>Bine ai venit la AIR Support</h1>
            <p>Aceasta este o zonÄƒ sigurÄƒ, exclusiv audio.</p>
            <p>Camera video este dezactivatÄƒ pentru toÈ›i participanÈ›ii pentru a asigura anonimatul.</p>
            
            <button class="btn-start" onclick="startMeeting('CameraPublicaAIR')">
                ğŸ§ IntrÄƒ Ã®n ÃntÃ¢lnirea PublicÄƒ
            </button>
        </div>

        <!-- Aici va apÄƒrea conferinÈ›a -->
        <div id="jitsi-container"></div>

        <!-- INSTRUCÈšIUNI -->
        <div style="margin-top: 30px; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
            <h3>Cum funcÈ›ioneazÄƒ?</h3>
            <ul>
                <li>Nu te vedem. Camera video este opritÄƒ din sistem.</li>
                <li>Nu trebuie sÄƒ Ã®È›i faci cont.</li>
                <li>Scrie-È›i un nume (poate fi un pseudonim) cÃ¢nd È›i se cere.</li>
            </ul>
        </div>

        <!-- ZONA ADMINISTRARE (SecretÄƒ) -->
        <div id="admin-panel">
            <h3>ğŸ”§ Panou Administrator</h3>
            <p>CreeazÄƒ o camerÄƒ nouÄƒ (ex: SedintaDeSeara, GrupFemei, etc.)</p>
            <input type="text" id="new-room-name" class="admin-input" placeholder="Numele camerei (fÄƒrÄƒ spaÈ›ii)">
            <button class="btn-admin" onclick="createAdminRoom()">CreeazÄƒ & IntrÄƒ ca Moderator</button>
            <p><small>*Fiind primul care intrÄƒ, vei fi moderator. SeteazÄƒ o parolÄƒ din meniul 'Security Options' din dreapta jos odatÄƒ intrat.</small></p>
        </div>

    </div>

    <footer onclick="toggleAdminLogin()">
        &copy; 2024 AIR Support RomÃ¢nia. (Admin Login)
    </footer>

    <script>
        let api = null;

        // AceastÄƒ funcÈ›ie porneÈ™te conferinÈ›a
        function startMeeting(roomName) {
            // Ascundem textul de bun venit È™i arÄƒtÄƒm containerul video
            document.getElementById('welcome-message').style.display = 'none';
            document.getElementById('jitsi-container').style.display = 'block';

            const domain = 'meet.jit.si';
            const options = {
                roomName: roomName,
                width: '100%',
                height: 600,
                parentNode: document.querySelector('#jitsi-container'),
                configOverwrite: {
                    startWithVideoMuted: true, // PorneÈ™te fÄƒrÄƒ video
                    startAudioOnly: true,      // ForÈ›eazÄƒ modul audio-only
                    disableDeepLinking: true,  // Nu cere instalarea aplicaÈ›iei mobile
                    prejoinPageEnabled: false  // IntrÄƒ direct
                },
                interfaceConfigOverwrite: {
                    // Ascundem butonul de camerÄƒ video complet!
                    TOOLBAR_BUTTONS: [
                        'microphone', 'chat', 'raisehand', 'tileview', 'hangup', 
                        'participants-pane', 'settings'
                    ],
                    // Ascundem alte elemente vizuale inutile
                    filmStripOnly: true,
                    SHOW_JITSI_WATERMARK: false
                },
                userInfo: {
                    displayName: 'Vizitator Anonim'
                }
            };

            api = new JitsiMeetExternalAPI(domain, options);
            
            // ForÈ›Äƒm oprirea videoului dacÄƒ cumva se activeazÄƒ
            api.addEventListener('videoConferenceJoined', () => {
                api.executeCommand('toggleVideo');
            });
        }

        // --- FUNCÈšII ADMIN ---

        // 1. Logica pentru a afiÈ™a panoul secret
        function toggleAdminLogin() {
            // VerificÄƒm dacÄƒ panoul e deja vizibil
            if(document.getElementById('admin-panel').style.display === 'block') {
                return;
            }

            // Cerem parola (simplÄƒ, client-side)
            // PoÈ›i schimba 'AIR2024' cu ce parolÄƒ vrei tu
            let password = prompt("IntroduceÈ›i parola de administrator:");
            
            if (password === "AIR2024") {
                alert("Autentificare reuÈ™itÄƒ!");
                document.getElementById('admin-panel').style.display = 'block';
                // Facem scroll jos la panou
                document.getElementById('admin-panel').scrollIntoView();
            } else if (password != null) {
                alert("ParolÄƒ greÈ™itÄƒ.");
            }
        }

        // 2. Crearea unei camere noi de cÄƒtre Admin
        function createAdminRoom() {
            let roomName = document.getElementById('new-room-name').value;
            if(!roomName) {
                alert("Te rog scrie un nume pentru camerÄƒ.");
                return;
            }
            
            // CurÄƒÈ›Äƒm numele de spaÈ›ii È™i caractere ciudate pentru a fi un link valid
            roomName = "AIR-" + roomName.replace(/[^a-zA-Z0-9]/g, "");

            // DacÄƒ existÄƒ deja o conferinÈ›Äƒ deschisÄƒ, o Ã®nchidem
            if(api) {
                api.dispose();
            }

            // Pornim noua conferinÈ›Äƒ
            startMeeting(roomName);
        }
    </script>
</body>
</html>
